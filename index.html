<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Change Journey – CDC Board</title>
<style>
    :root {
        --blue-header: #c7d7f5;
        --blue-footer: #c3d2eb;
        --board-bg: #082446;
        --cdc-width: 260px;
    }

    * {
        box-sizing: border-box;
    }

    body {
        margin: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: #e7edf8;
    }

    .app {
        display: flex;
        height: 100vh;
    }

    /* PALETTE (pott med tomma kort) */

    .palette {
        width: 280px;
        background: #f4f4f8;
        padding: 12px;
        border-right: 1px solid #d0d0dd;
        overflow-y: auto;
    }

    .palette h2 {
        font-size: 16px;
        margin: 0 0 8px;
    }

    .palette-section-title {
        font-size: 12px;
        font-weight: 600;
        margin: 12px 0 4px;
        text-transform: uppercase;
        letter-spacing: 0.04em;
        color: #555;
    }

    .palette-item {
        margin-bottom: 12px;
        cursor: grab;
    }

    .hint {
        font-size: 11px;
        color: #666;
        margin-top: 4px;
        line-height: 1.3;
    }

    /* BOARD / TIMELINE */

    .board-wrapper {
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .board-header {
        padding: 10px 16px;
        background: linear-gradient(to right, #11284d, #1b3a70);
        color: white;
        font-size: 14px;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .board-header-title {
        font-size: 16px;
        font-weight: 600;
    }

    .board {
        flex: 1;
        background: var(--board-bg);
        padding: 16px;
        overflow: auto;
    }

    .timeline-label {
        color: #f3f5ff;
        font-size: 12px;
        margin-bottom: 6px;
        text-transform: uppercase;
        letter-spacing: 0.06em;
    }

    .timeline {
        min-height: 260px;
        border-radius: 10px;
        border: 2px dashed rgba(255,255,255,0.4);
        padding: 10px;
        display: flex;
        flex-wrap: wrap;
        align-items: flex-start;
        gap: 10px;
    }

    .timeline.drag-over {
        border-style: solid;
        background: radial-gradient(circle at top left,
            rgba(255,255,255,0.1),
            rgba(0,0,0,0));
    }

    /* CDC CARD */

    .cdc-card {
        width: var(--cdc-width);
        background: #fdfdfd;
        border-radius: 4px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        border-top: 4px solid var(--blue-header);
        padding-bottom: 4px;
        font-size: 11px;
    }

    .cdc-header {
        background: var(--blue-header);
        padding: 4px 6px 2px;
        border-radius: 4px 4px 0 0;
        display: grid;
        grid-template-columns: 80px 1fr 32px;
        column-gap: 4px;
        align-items: center;
    }

    .cdc-title {
        grid-column: 1 / 4;
        text-align: center;
        font-size: 11px;
        font-weight: 600;
        margin-bottom: 4px;
    }

    .cdc-type {
        background: #148a3a;
        color: #fff;
        border-radius: 5px;
        padding: 10px 4px;
        font-size: 10px;
        text-align: center;
        text-transform: uppercase;
        font-weight: 600;
    }

    .cdc-type[contenteditable="true"],
    .cdc-content[contenteditable="true"],
    .cdc-topic[contenteditable="true"],
    .cdc-benefit[contenteditable="true"],
    .payoff-label[contenteditable="true"],
    .arrow-text[contenteditable="true"],
    .comm-text[contenteditable="true"] {
        outline: none;
    }

    .cdc-content {
        background: #f9fafc;
        border-radius: 5px;
        padding: 6px 4px;
        min-height: 28px;
        border: 1px dashed #c0cadf;
        color: #555;
        font-size: 10px;
        text-align: center;
    }

    .cdc-meta {
        display: flex;
        flex-direction: column;
        align-items: center;
        font-size: 9px;
    }

    .cdc-circle {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        border: 2px solid #d6403b;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 2px;
        background: #fff;
    }

    .cdc-circle[contenteditable="true"],
    .cdc-time[contenteditable="true"] {
        cursor: text;
    }

    .cdc-time {
        font-size: 9px;
    }

    .cdc-body {
        padding: 6px;
    }

    .cdc-label {
        font-size: 9px;
        font-weight: 600;
        margin-bottom: 2px;
    }

    .cdc-topic {
        min-height: 42px;
        padding: 4px;
        border-radius: 2px;
        background: #ffffff;
        border: 1px solid #eee;
        margin-bottom: 4px;
    }

    .cdc-dashed {
        border-top: 2px dashed #e04848;
        margin: 4px 0;
    }

    .cdc-benefit {
        min-height: 32px;
        padding: 4px;
        border-radius: 2px;
        background: #ffffff;
        border: 1px solid #eee;
        margin-top: 2px;
    }

    .cdc-footer {
        background: var(--blue-footer);
        padding: 4px 6px;
        border-radius: 0 0 4px 4px;
        display: grid;
        grid-template-columns: 1.4fr 1.6fr;
        column-gap: 2px;
        align-items: flex-start;
    }

    .payoff-left,
    .payoff-right {
        font-size: 9px;
    }

    .payoff-left-title {
        font-weight: 600;
        margin-bottom: 2px;
    }

    .payoff-item {
        display: flex;
        align-items: center;
        gap: 4px;
    }

    .payoff-dot {
        width: 7px;
        height: 7px;
        border-radius: 50%;
        border: 1px solid #666;
        background: #fff;
    }

    .payoff-label {
        flex: 1;
    }

    .payoff-box {
        height: 10px;
        border-radius: 2px;
        background: #fff;
        border: 1px solid #9ca9c3;
        margin-bottom: 2px;
    }

    /* RED ARROW (kapitel) */

    .arrow-card {
        width: 180px;
        height: 60px;
        background: #d83434;
        color: #fff;
        font-weight: 600;
        font-size: 12px;
        position: relative;
        clip-path: polygon(0 0, 80% 0, 100% 50%, 80% 100%, 0 100%);
        display: flex;
        align-items: center;
        padding-left: 10px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.25);
    }

    .arrow-text {
        width: 80%;
    }

    /* COMM BLOCK */

    .comm-card {
        width: 200px;
        height: 90px;
        background: #fdfdfd;
        border: 2px solid #b9bcc5;
        border-radius: 4px;
        padding: 4px 6px;
        font-size: 10px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    }

    .comm-header {
        font-weight: 600;
        font-size: 10px;
        margin-bottom: 2px;
    }

    .comm-text {
        flex: 1;
        padding: 3px;
        border: 1px dashed #ccc;
        background: #ffffff;
        border-radius: 2px;
    }

    .comm-meta {
        text-align: right;
        font-size: 9px;
        color: #555;
    }

    /* GENERAL DRAG STYLING */

    .draggable {
        cursor: grab;
    }

    .draggable:active {
        cursor: grabbing;
    }
</style>
</head>
<body>
<div class="app">
    <!-- Palette -->
    <aside class="palette">
        <h2>Templates</h2>
        <div class="hint">
            Dra ett kort eller en pil till tidslinjen. All text på korten kan ändras direkt.
        </div>

        <div class="palette-section-title">CDC card</div>
        <div class="palette-item palette-prototype" draggable="true" data-template-id="tpl-cdc">
            <!-- en liten förhandsvisning -->
            <div class="cdc-card">
                <div class="cdc-header">
                    <div class="cdc-title">Change Development</div>
                    <div class="cdc-type">Coaching</div>
                    <div class="cdc-content">Content</div>
                    <div class="cdc-meta">
                        <div class="cdc-circle">1</div>
                        <div class="cdc-time">1h</div>
                    </div>
                </div>
                <div class="cdc-body">
                    <div class="cdc-label">Topic / learning goal</div>
                    <div class="cdc-topic">Write topic here…</div>
                    <div class="cdc-dashed"></div>
                    <div class="cdc-label">benefit</div>
                    <div class="cdc-benefit"></div>
                </div>
                <div class="cdc-footer">
                    <div class="payoff-left">
                        <div class="payoff-left-title">Pay off:</div>
                        <div class="payoff-item">
                            <div class="payoff-dot"></div><span class="payoff-label">knowledge</span>
                        </div>
                        <div class="payoff-item">
                            <div class="payoff-dot"></div><span class="payoff-label">behavior</span>
                        </div>
                        <div class="payoff-item">
                            <div class="payoff-dot"></div><span class="payoff-label">attitude</span>
                        </div>
                    </div>
                    <div class="payoff-right">
                        <div>emotions</div>
                        <div class="payoff-box"></div>
                        <div>thoughts</div>
                        <div class="payoff-box"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="palette-section-title">Focus arrow</div>
        <div class="palette-item palette-prototype" draggable="true" data-template-id="tpl-arrow">
            <div class="arrow-card">
                <div class="arrow-text">New chapter</div>
            </div>
        </div>

        <div class="palette-section-title">Communication block</div>
        <div class="palette-item palette-prototype" draggable="true" data-template-id="tpl-comm">
            <div class="comm-card">
                <div class="comm-header">Communication block</div>
                <div class="comm-text">
                    e.g. Email before training, info to manager…
                </div>
                <div class="comm-meta">Before / after CDC</div>
            </div>
        </div>

        <div class="hint">
            Tips: När korten ligger på tidslinjen kan du dra dem för att byta plats.
        </div>
    </aside>

    <!-- Board -->
    <div class="board-wrapper">
        <div class="board-header">
            <div class="board-header-title">Change Journey Timeline</div>
            <div style="font-size:11px;">Dra kort hit från vänster.</div>
        </div>
        <div class="board">
            <div class="timeline-label">Approx. 6 months journey</div>
            <div class="timeline" id="timeline"></div>
        </div>
    </div>
</div>

<!-- TEMPLATES (osynliga i UI) -->
<template id="tpl-cdc">
    <div class="cdc-card draggable" draggable="true" data-kind="cdc">
        <div class="cdc-header">
            <div class="cdc-title">Change Development</div>
            <div class="cdc-type" contenteditable="true">Coaching</div>
            <div class="cdc-content" contenteditable="true">Content</div>
            <div class="cdc-meta">
                <div class="cdc-circle" contenteditable="true">1</div>
                <div class="cdc-time" contenteditable="true">1h</div>
            </div>
        </div>
        <div class="cdc-body">
            <div class="cdc-label">Topic / learning goal</div>
            <div class="cdc-topic" contenteditable="true">I am able to work with…</div>
            <div class="cdc-dashed"></div>
            <div class="cdc-label">benefit</div>
            <div class="cdc-benefit" contenteditable="true"></div>
        </div>
        <div class="cdc-footer">
            <div class="payoff-left">
                <div class="payoff-left-title">Pay off:</div>
                <div class="payoff-item">
                    <div class="payoff-dot"></div><span class="payoff-label" contenteditable="true">knowledge</span>
                </div>
                <div class="payoff-item">
                    <div class="payoff-dot"></div><span class="payoff-label" contenteditable="true">behavior</span>
                </div>
                <div class="payoff-item">
                    <div class="payoff-dot"></div><span class="payoff-label" contenteditable="true">attitude</span>
                </div>
            </div>
            <div class="payoff-right">
                <div>emotions</div>
                <div class="payoff-box"></div>
                <div>thoughts</div>
                <div class="payoff-box"></div>
            </div>
        </div>
    </div>
</template>

<template id="tpl-arrow">
    <div class="arrow-card draggable" draggable="true" data-kind="arrow">
        <div class="arrow-text" contenteditable="true">Awareness</div>
    </div>
</template>

<template id="tpl-comm">
    <div class="comm-card draggable" draggable="true" data-kind="comm">
        <div class="comm-header">Communication block</div>
        <div class="comm-text" contenteditable="true">
            Email to teamleader: invite and explain purpose…
        </div>
        <div class="comm-meta" contenteditable="true">Before CDC</div>
    </div>
</template>

<script>
(function() {
    let dragData = null;

    const timeline = document.getElementById('timeline');

    // ----- palette dragstart -----
    document.querySelectorAll('.palette-prototype').forEach(el => {
        el.addEventListener('dragstart', e => {
            dragData = {
                from: 'palette',
                templateId: el.dataset.templateId
            };
            e.dataTransfer.effectAllowed = 'copy';
        });
    });

    // ----- timeline drag + drop -----

    timeline.addEventListener('dragover', e => {
        e.preventDefault();
        e.dataTransfer.dropEffect = 'move';
        timeline.classList.add('drag-over');
    });

    timeline.addEventListener('dragleave', e => {
        if (e.target === timeline) {
            timeline.classList.remove('drag-over');
        }
    });

    timeline.addEventListener('drop', e => {
        e.preventDefault();
        timeline.classList.remove('drag-over');

        if (!dragData) return;

        if (dragData.from === 'palette') {
            const tpl = document.getElementById(dragData.templateId);
            if (!tpl) return;
            const node = tpl.content.firstElementChild.cloneNode(true);
            node.id = createId();
            addBoardCard(node);
            timeline.appendChild(node);
        } else if (dragData.from === 'board') {
            const el = document.getElementById(dragData.elementId);
            if (el) {
                timeline.appendChild(el);
            }
        }

        dragData = null;
    });

    // ----- helper: ge unikt id -----
    function createId() {
        return 'card-' + Math.random().toString(36).slice(2);
    }

    // ----- göra kort på boarden dragbara -----
    function addBoardCard(node) {
        node.addEventListener('dragstart', e => {
            dragData = {
                from: 'board',
                elementId: node.id
            };
            e.dataTransfer.effectAllowed = 'move';
        });
    }

    // (om du vill kunna börja med några kort direkt på tavlan,
    // kan du skapa dem här genom att kalla addBoardCard + appendChild.)
})();
</script>
</body>
</html>